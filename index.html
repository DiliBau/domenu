<!DOCTYPE html>
<html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <title>jQuery doMenu Plugin</title>
  <link rel="stylesheet" type="text/css" href="presentation-style.css"/>
  <link rel="stylesheet" type="text/css" href="jquery.domenu-0.48.53.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/atelier-cave-light.min.css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

</head>
<body>
<div class="header">
  <a href="#"><img class="logo" src="logo-domenu.png" alt=""></a>
  <h1>doMenu <sup>v0.48.53</sup></h1>
  <p>Customized version of Nestable for back-end hierarchical menu creation</p>
  <div class="menu-container">
    <ul class="menu">
      <li><a href="">Github Repository</a></li>
      <li><a href="">Quick API</a></li>
      <li><a href="">API</a></li>
      <li><a href="">Download</a></li>
    </ul>
  </div>
</div>
<section>
  <div class="dd" id="domenu-0" style="margin-left: 20%;">
  <button class="dd-new-item">+</button>
  <li class="dd-item-blueprint">
    <button class="collapse" data-action="collapse" type="button" style="display: none;">–</button>
    <button class="expand" data-action="expand" type="button" style="display: none;">+</button>
    <div class="dd-handle dd3-handle">Drag</div>
    <div class="dd3-content">
      <span class="item-name">[item_name]</span>
      <div class="dd-button-container">
        <button class="item-add">+</button>
        <button class="item-remove" data-confirm-class="item-remove-confirm">&times;</button>
      </div>
      <div class="dd-edit-box" style="display: none;">
        <input type="text" name="title" autocomplete="off" placeholder="Item"
               data-placeholder="Any nice idea for the title?"
               data-default-value="doMenu List Item. {?numeric.increment}">
        <i class="end-edit">save</i>
      </div>
    </div>
  </li>
  <ol class="dd-list"></ol>
  </div>
</section>
<script>
$(document).ready(function() {
  $('#domenu-0').domenu({
    data: '[{"title":"Hi, drag me!","customSelect":"select something...","select2ScrollPosition":{"x":0,"y":0}},{"title":"No! Wait, drag me instead!","customSelect":"http://test.com","select2ScrollPosition":{"x":0,"y":0}}]'
  }).parseJson()
});
</script>
<section>
  <h2>Installation</h2>
  <ol>
    <li>Download the repository and unpack the <code>.js</code> and <code>.css</code> files.</li>
    <li>Add tags
      <pre><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;jquery.domenu-0.48.53.css&quot;/&gt;<br/>&lt;/head&gt;<br/>...<br/>&lt;script src=&quot;jquery.domenu-0.48.53.js&quot;&gt;&lt;/script&gt;<br/>&lt;/body&gt;</code></pre></li>
    <li>Add the HTML template
      <pre><code>&lt;body&gt;<br/>...<br/>&lt;div class=&quot;dd&quot; id=&quot;domenu-0&quot;&gt;<br/>  &lt;button class=&quot;dd-new-item&quot;&gt;+&lt;/button&gt;<br/>  &lt;li class=&quot;dd-item-blueprint&quot;&gt;<br/>    &lt;button class=&quot;collapse&quot; data-action=&quot;collapse&quot; type=&quot;button&quot; style=&quot;display: none;&quot;&gt;&#x2013;&lt;/button&gt;<br/>    &lt;button class=&quot;expand&quot; data-action=&quot;expand&quot; type=&quot;button&quot; style=&quot;display: none;&quot;&gt;+&lt;/button&gt;<br/>    &lt;div class=&quot;dd-handle dd3-handle&quot;&gt;Drag&lt;/div&gt;<br/>    &lt;div class=&quot;dd3-content&quot;&gt;<br/>      &lt;span class=&quot;item-name&quot;&gt;[item_name]&lt;/span&gt;<br/>      &lt;div class=&quot;dd-button-container&quot;&gt;<br/>        &lt;button class=&quot;item-add&quot;&gt;+&lt;/button&gt;<br/>        &lt;button class=&quot;item-remove&quot; data-confirm-class=&quot;item-remove-confirm&quot;&gt;&amp;times;&lt;/button&gt;<br/>      &lt;/div&gt;<br/>      &lt;div class=&quot;dd-edit-box&quot; style=&quot;display: none;&quot;&gt;<br/>        &lt;input type=&quot;text&quot; name=&quot;title&quot; autocomplete=&quot;off&quot; placeholder=&quot;Item&quot;<br/>               data-placeholder=&quot;Any nice idea for the title?&quot;<br/>               data-default-value=&quot;doMenu List Item. {?numeric.increment}&quot;&gt;<br/>        &lt;i class=&quot;end-edit&quot;&gt;save&lt;/i&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/li&gt;<br/>  &lt;ol class=&quot;dd-list&quot;&gt;&lt;/ol&gt;<br/>&lt;/div&gt;<br/>...<br/>&lt;/body&gt;</code></pre>
    </li>
    <li>
      Add the initialization code
      <pre><code>&lt;script&gt;<br/>$(document).ready(function() {<br/>  $('#domenu-0').domenu({<br/>    data: '[{&quot;title&quot;:&quot;Hi, drag me!&quot;,&quot;customSelect&quot;:&quot;select something...&quot;,&quot;select2ScrollPosition&quot;:{&quot;x&quot;:0,&quot;y&quot;:0}},{&quot;title&quot;:&quot;No! Wait, drag me instead!&quot;,&quot;customSelect&quot;:&quot;http://test.com&quot;,&quot;select2ScrollPosition&quot;:{&quot;x&quot;:0,&quot;y&quot;:0}}]'<br/>  }).parseJson()<br/>});<br/>&lt;/script&gt;</code></pre>
    </li>
    <li>You're done!</li>
  </ol>
</section>
<section>
  <h2>Introduction</h2>
  <p class="desc">This example represents an integrated <a href="#user-menu">doMenu instance</a> with <code>Select2</code>.
                  This instance of doMenu takes advantage of the robust customization
                  capabilities of the plugin where we have created a custom edit button.
                  Try opening your <code>browser console</code> to see a log of the fired events.
  </p>
  <p>Things to try out:</p>
  <ol>
    <li>Drag (using gray handle on the left) the second list item named <code>settings</code> horizontally to the right to make it a child of <code>Account</code>
    <span class="info">To unset a child drag it horizontally to the left.</span>
    </li>
    <li>Now you should be able to collapse and expand <code>Account</code> by clicking on <code>–</code> and <code>+</code>
        respectively, next to the item's name. <span class="info">In your HTML markup you might change the appearance of the button editing
        the <code>.dd-item-blueprint</code> template.</span>
      <pre><code>&lt;button class=&quot;expand&quot; data-action=&quot;expand&quot; type=&quot;button&quot; style=&quot;display: none;&quot;&gt;+&lt;/button&gt;</code></pre></li>
    <li>Hover your mouse cursor over the <code>Settings</code> list item and click on the pencil button on the left to enter the <code>edit mode</code>.
        <span class="info">You might also click directly on the item's name to enter the edit mode.</span>
    </li>
    <li>Click on the select and enter a custom URL press the <code>enter key</code> to confirm. Then click on <code>save</code> and observe on the left how the doMenu generated JSON changes.
      <span class="info">In the <code>edit mode</code> you can specify the values for the input fields as specified in your <code>.dd-item-blueprint</code> template. Currently we have specified
    one <code>text input</code> for the title of the item and an additional <code>select input</code> named <code>custom-select</code> for everything else.
    Using integrated <code>Select2</code> with <code>tags</code> turned on you can create new options in realtime.</span>
      <pre><code class="html">&lt;select name=&quot;custom-select&quot;&gt;<br/>  &lt;option&gt;select something...&lt;/option&gt;<br/>  &lt;optgroup label=&quot;Pages&quot;&gt;<br/>    &lt;option value=&quot;1&quot;&gt;http://example.com/page/1&lt;/option&gt;<br/>    ...<br/>  &lt;/optgroup&gt;<br/>  &lt;optgroup label=&quot;Categories&quot;&gt;<br/>    &lt;option value=&quot;3&quot;&gt;News&lt;/option&gt;<br/>    ...<br/>  &lt;/optgroup&gt;<br/>&lt;/select&gt;</code></pre></li>
    <li>Drag an item from <code>User menu</code> to the <code>Shop menu</code>.
      <span class="info">You can mix items from different instances together, doMenu will handle that.</span>
    </li>
    <li>Have fun with doMenu.</li>
  </ol>
  <h3 id="user-menu">User menu</h3>
  <div class="dd" id="domenu-1">
    <button id="domenu-add-item-btn" class="dd-new-item">+</button>
    <!-- .dd-item-blueprint is a template for all .dd-item's -->
    <li class="dd-item-blueprint">
      <!-- @migrating-from 0.48.59 button container -->
      <button class="collapse" data-action="collapse" type="button" style="display: none;">–</button>
      <button class="expand" data-action="expand" type="button" style="display: none;">+</button>
      <div class="dd-handle dd3-handle">Drag</div>
      <div class="dd3-content">
        <span class="item-name">[item_name]</span>
        <!-- @migrating-from 0.13.29 button container-->
        <!-- .dd-button-container will hide once an item enters the edit mode -->
        <div class="dd-button-container">
          <!-- @migrating-from 0.13.29 add button-->
          <button class="custom-button-example">&#x270E;</button>
          <button class="item-add">+</button>
          <button class="item-remove" data-confirm-class="item-remove-confirm">&times;</button>
        </div>
        <!-- Inside of .dd-edit-box you can add your custom input fields -->
        <div class="dd-edit-box" style="display: none;">
          <!-- data-placeholder has a higher priority than placeholder -->
          <!-- data-placeholder can use token-values; when not present will be set to "" -->
          <!-- data-default-value specifies a default value for the input; when not present will be set to "" -->
          <input type="text" name="title" autocomplete="off" placeholder="Item"
                 data-placeholder="Any nice idea for the title?"
                 data-default-value="doMenu List Item. {?numeric.increment}">
          <select name="custom-select">
            <option>select something...</option>
            <optgroup label="Pages">
              <option value="1">http://example.com/page/1</option>
              <option value="2">http://example.com/page/2</option>
            </optgroup>
            <optgroup label="Categories">
              <option value="3">News</option>
              <option value="4">Stories</option>
            </optgroup>
          </select>
          <!-- @migrating-from 0.13.29 an element ".end-edit" within ".dd-edit-box" exists the edit mode on click -->
          <i class="end-edit">save</i>
        </div>
      </div>
    </li>

    <ol class="dd-list"></ol>
  </div>

  <div id="domenu-1-output" class="output-preview-container">
    <h4>JSON Output Preview (User menu)</h4>
    <textarea style="width: 100%; min-height: 300px;" name="jsonOutput" class="jsonOutput"></textarea>
    <input type="checkbox" name="keepchages" class="keepChanges" checked> Keep changes after page reload (localStorage)
    <br><br>
    <input style="display:none;" type="button" name="clearLocalStorage" class="clearLocalStorage" value="Reset demo">
  </div>
</section>

<script>
  $(document).ready(function() {
    var $domenu            = $('#domenu-1'),
        domenu             = $('#domenu-1').domenu(),
        $outputContainer   = $('#domenu-1-output'),
        $jsonOutput        = $outputContainer.find('.jsonOutput'),
        $keepChanges       = $outputContainer.find('.keepChanges'),
        $clearLocalStorage = $outputContainer.find('.clearLocalStorage');

    $domenu.domenu({
        slideAnimationDuration: 0,
        select2 : {
          support: true,
          params: {
            tags: true
          }
        },
        data:                   window.localStorage.getItem('domenu-1Json') || '[{"title":"Account","customSelect":"select something...","select2ScrollPosition":{"x":0,"y":0}},{"title":"Settings","customSelect":"select something...","select2ScrollPosition":{"x":0,"y":0}},{"title":"Call","customSelect":"select something..."},{"title":"Support","customSelect":"select something..."},{"title":"Email","customSelect":"select something..."},{"title":"Orders","customSelect":"select something..."},{"title":"Manage","customSelect":"select something..."},{"title":"Settings","customSelect":"select something..."}]'
      })
      // Example: initializing functionality of a custom button #21
      .onCreateItem(function(blueprint) {
        // We look with jQuery for our custom button we denoted with class "custom-button-example"
        // Note 1: blueprint holds a reference of the element which is about to be added the list
        var customButton = $(blueprint).find('.custom-button-example');

        // Here we define our custom functionality for the button,
        // we will forward the click to .dd3-content span and let
        // doMenu handle the rest
        customButton.click(function() {
          blueprint.find('.dd3-content span').first() .click();
        });
      })
      // Now every element which will be parsed will go through our onCreateItem event listener, and therefore
      // initialize the functionality our custom button
      .parseJson()
      .on(['onItemAdded', 'onSaveEditBoxInput', 'onItemDrop', 'onItemDrag', 'onItemRemoved', 'onItemEndEdit'], function(a, b, c) {
        $jsonOutput.val(domenu.toJson());
        if($keepChanges.is(':checked')) window.localStorage.setItem('domenu-1Json', domenu.toJson());
      })
      .onToJson(function() {
        if(window.localStorage.length) $clearLocalStorage.show();
      });

      // Console event examples
      domenu.on('*', function(a, b, c) {
        console.log('event:', '*', 'arguments:', arguments, 'context:', this);
      })
      .onParseJson(function() {
        console.log('event: onFromJson', 'arguments:', arguments, 'context:', this);
      })
      .onToJson(function() {
        console.log('event: onToJson', 'arguments:', arguments, 'context:', this);
      })
      .onSaveEditBoxInput(function() {
        console.log('event: onSaveEditBoxInput', 'arguments:', arguments, 'context:', this);
      })
      .onItemDrag(function() {
        console.log('event: onItemDrag', 'arguments:', arguments, 'context:', this);
      })
      .onItemDrop(function() {
        console.log('event: onItemDrop', 'arguments:', arguments, 'context:', this);
      })
      .onItemAdded(function() {
        console.log('event: onItemAdded', 'arguments:', arguments, 'context:', this);
      })
      .onItemCollapsed(function() {
        console.log('event: onItemCollapsed', 'arguments:', arguments, 'context:', this);
      })
      .onItemExpanded(function() {
        console.log('event: onItemExpanded', 'arguments:', arguments, 'context:', this);
      })
      .onItemRemoved(function() {
        console.log('event: onItemRemoved', 'arguments:', arguments, 'context:', this);
      })
      .onItemStartEdit(function() {
        console.log('event: onItemStartEdit', 'arguments:', arguments, 'context:', this);
      })
      .onItemEndEdit(function() {
        console.log('event: onItemEndEdit', 'arguments:', arguments, 'context:', this);
      })
      .onItemAddChildItem(function() {
        console.log('event: onItemAddChildItem', 'arguments:', arguments, 'context:', this);
      });

    if(window.localStorage.length) $clearLocalStorage.show();


    $clearLocalStorage.click(function() {
      if(true) window.localStorage.clear();
      if(!window.localStorage.length) $clearLocalStorage.hide();
      // Part of the reset demo routine
      window.location.reload();
    });

    // Init textarea
    $jsonOutput.val(domenu.toJson());
    $keepChanges.on('click', function() {
      if(!$keepChanges.is(':checked')) window.localStorage.setItem('domenu-1KeepChanges', false);
      if($keepChanges.is(':checked')) window.localStorage.setItem('domenu-1KeepChanges', true);
    });

    if(window.localStorage.getItem('domenu-1KeepChanges') === "false") $keepChanges.attr('checked', false);
  });
</script>
<section>
  <h3>Shop menu</h3>
  <p>Here is an example of a doMenu instance with just few custom input fields added. Everything else comes out of the box with doMenu.</p>
  <div class="dd" id="domenu-2">
    <button class="dd-new-item">+</button>
    <!-- .dd-item-blueprint is a template for all .dd-item's -->
    <li class="dd-item-blueprint">
      <!-- @migrating-from 0.48.59 button container -->
      <button class="collapse" data-action="collapse" type="button" style="display: none;">–</button>
      <button class="expand" data-action="expand" type="button" style="display: none;">+</button>
      <div class="dd-handle dd3-handle">Drag</div>
      <div class="dd3-content">
        <span class="item-name">[item_name]</span>
        <!-- @migrating-from 0.13.29 button container-->
        <!-- .dd-button-container will hide once an item enters the edit mode -->
        <div class="dd-button-container">
          <!-- @migrating-from 0.13.29 add button-->
          <button class="item-add">+</button>
          <button class="item-remove" data-confirm-class="item-remove-confirm">&times;</button>
        </div>
        <!-- Inside of .dd-edit-box you can add your custom input fields -->
        <div class="dd-edit-box" style="display: none;">
          <!-- data-placeholder has a higher priority than placeholder -->
          <!-- data-placeholder can use token-values; when not present will be set to "" -->
          <!-- data-default-value specifies a default value for the input; when not present will be set to "" -->
          <input type="text" name="title" autocomplete="off" placeholder="Item"
                 data-placeholder="Any nice idea for the title?"
                 data-default-value="doMenu List Item. {?numeric.increment}">
          <select name="custom-select">
            <option>select something...</option>
            <optgroup label="Pages">
              <option value="1">http://example.com/page/1</option>
              <option value="2">http://example.com/page/2</option>
            </optgroup>
            <optgroup label="Categories">
              <option value="3">News</option>
              <option value="4">Stories</option>
            </optgroup>
          </select>
          <!-- @migrating-from 0.13.29 an element ".end-edit" within ".dd-edit-box" exists the edit mode on click -->
          <i class="end-edit">save</i>
        </div>
      </div>
    </li>
    <ol class="dd-list"></ol>
  </div>
  <div id="domenu-2-output" class="output-preview-container">
    <h4>JSON Output Preview (Shop menu)</h4>
    <textarea style="width: 100%; min-height: 300px;" name="jsonOutput" class="jsonOutput"></textarea>
    <input type="checkbox" name="keepchages" class="keepChanges" checked> Keep changes after page reload (localStorage)
    <br><br>
    <input style="display:none;" type="button" name="clearLocalStorage" class="clearLocalStorage" value="Reset demo">
  </div>
</section>

<script>
  $(document).ready(function() {
    var $domenu            = $('#domenu-2'),
        domenu             = $('#domenu-2').domenu(),
        $outputContainer   = $('#domenu-2-output'),
        $jsonOutput        = $outputContainer.find('.jsonOutput'),
        $keepChanges       = $outputContainer.find('.keepChanges'),
        $clearLocalStorage = $outputContainer.find('.clearLocalStorage');

    $('#domenu-2').domenu({
        slideAnimationDuration: 0,
        data: window.localStorage.getItem('domenu-2Json') ||'[{"id":11,"title":"Another list","http":"","superselect":"2","customSelect":"select something...","children":[{"id":10,"title":"News","http":"","superselect":"1","customSelect":"select something..."},{"id":9,"title":"Categories","http":"","superselect":"1","customSelect":"2"}]},{"title":"Check","customSelect":"select something..."},{"title":"New","customSelect":"select something..."}]'
      })
      .parseJson()
      .on(['onItemAdded', 'onSaveEditBoxInput', 'onItemDrop', 'onItemDrag', 'onItemRemoved', 'onItemEndEdit'], function(a, b, c) {
        $jsonOutput.val(domenu.toJson());
        if($keepChanges.is(':checked')) window.localStorage.setItem('domenu-2Json', domenu.toJson());
      })
      .onToJson(function() {
        if(window.localStorage.length) $clearLocalStorage.show();
      });

      $clearLocalStorage.click(function() {
        if(true) window.localStorage.clear();
        if(!window.localStorage.length) $clearLocalStorage.hide();
        // Part of the reset demo routine
        window.location.reload();
      });

      // Init textarea
      $jsonOutput.val(domenu.toJson());
      $keepChanges.on('click', function() {
        if(!$keepChanges.is(':checked')) window.localStorage.setItem('domenu-2KeepChanges', false);
        if($keepChanges.is(':checked')) window.localStorage.setItem('domenu-2KeepChanges', true);
      });

      if(window.localStorage.getItem('domenu-2KeepChanges') === "false") $keepChanges.attr('checked', false);
  });
</script>
<section>
  <h2>Quick API</h2>
  <p>Access the <code>PublicPlugin</code> API with: <pre><code>$('#your-domenu-element').domenu()</code></pre></p>
  <p>Usage example:</p>
  <pre><code>$('#domenu-0').domenu().onItemAdded(function() {
  alert('An item has been added');
});</code></pre>
  <ul>
    <li>array getLists()
      <p>Returns the doMenu instance <code>list element</code>.</p></li>
    <li>string parseJson(string data[, bool override = false])
      <p>Converts JSON output to a doMenu instance.</p></li>
    <li>string toJson()
      <p>Serializes the instance and returns it as a JSON output.</p></li>
    <li>pPlugin expandAll()
    <p>Expands all items.</p></li>
    <li>pPlugin collapseAll()
        <p>Collapses all items.</p></li>
    <li>expand
      <p>The callback takes <code>item element</code> as argument.
         If the callback will return <code>true</code> then the
         item will get expanded.</p></li>
    <li>collapse
      <p>The callback takes <code>item element</code> as argument.
         If the callback will return <code>true</code> then the
         item will get collapsed.</p></li>
    <li>onParseJson</li>
    <li>onToJson</li>
    <li>onSaveEditBoxInput</li>
    <li>onItemDrag</li>
    <li>onItemDrop</li>
    <li>onItemAdded</li>
    <li>onItemRemoved</li>
    <li>onItemStartEdit</li>
    <li>onItemEndEdit</li>
    <li>onItemAddChildItem</li>
    <li>onCreateItem</li>
    <li>onItemCollapsed</li>
    <li>onItemExpanded</li>
    <li>on</li>
    <li>getListNodes</li>
    <li>getPluginOptions</li>
  </ul>
</section>
  <section><p class="small">Copyright &copy; 2015 Mateusz Zawartka | MIT Licensed <br/>
                            Build upon Nestable from <a href="http://dbushell.com/">David Bushell</a></p></section>
<script src="jquery.domenu-0.48.53.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
